document.addEventListener("DOMContentLoaded",(function(){let e="x-class",a="o-class",t=document.querySelectorAll(".box"),s=Array.from(t),l=document.querySelector(".winner"),d=document.querySelector(".winner-data"),o=!0,u=0;function n(){d.textContent="you are winner!",l.classList.add("winner-active")}function c(){d.textContent="you are looser!",l.classList.add("winner-active")}function i(){if("x"===t[0].dataset.value&"x"===t[1].dataset.value&"x"===t[2].dataset.value)n();else if("x"===t[3].dataset.value&"x"===t[4].dataset.value&"x"===t[5].dataset.value)n();else if("x"===t[6].dataset.value&"x"===t[7].dataset.value&"x"===t[8].dataset.value)n();else if("x"===t[0].dataset.value&"x"===t[3].dataset.value&"x"===t[6].dataset.value)n();else if("x"===t[1].dataset.value&"x"===t[4].dataset.value&"x"===t[7].dataset.value)n();else if("x"===t[2].dataset.value&"x"===t[5].dataset.value&"x"===t[8].dataset.value)n();else if("x"===t[0].dataset.value&"x"===t[4].dataset.value&"x"===t[8].dataset.value)n();else if("x"===t[2].dataset.value&"x"===t[4].dataset.value&"x"===t[6].dataset.value)n();else if("o"===t[0].dataset.value&"o"===t[1].dataset.value&"o"===t[2].dataset.value)c();else if("o"===t[3].dataset.value&"o"===t[4].dataset.value&"o"===t[5].dataset.value)c();else if("o"===t[6].dataset.value&"o"===t[7].dataset.value&"o"===t[8].dataset.value)c();else if("o"===t[0].dataset.value&"o"===t[3].dataset.value&"o"===t[6].dataset.value)c();else if("o"===t[1].dataset.value&"o"===t[4].dataset.value&"o"===t[7].dataset.value)c();else if("o"===t[2].dataset.value&"o"===t[5].dataset.value&"o"===t[8].dataset.value)c();else if("o"===t[0].dataset.value&"o"===t[4].dataset.value&"o"===t[8].dataset.value)c();else{if(!("o"===t[2].dataset.value&"o"===t[4].dataset.value&"o"===t[6].dataset.value))return u>7?(d.textContent="draw!",void l.classList.add("winner-active")):void 0;c()}}function v(){0==o&&(el=s[Math.floor(Math.random()*s.length)],el.classList.contains(e)||el.classList.contains(a)?v():(el.classList.add(a),el.dataset.value="o",console.log(el),o=!0,u++,i(),console.log(u)))}closeWinnerBlock=document.querySelector(".close-btn"),btnRestart=document.querySelector(".restart"),darkModeSwitch=document.querySelector(".switch"),tumblerSwitch=document.querySelector(".switch-tumbler"),btnRestart.addEventListener("click",()=>{t.forEach(t=>{t.classList.remove(e),t.classList.remove(a),t.dataset.value="",u=0,l.classList.remove("winner-active")})}),darkModeSwitch.addEventListener("click",()=>{tumblerSwitch.checked?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}),closeWinnerBlock.addEventListener("click",()=>{l.classList.remove("winner-active"),d.textContent=""}),1==o&&s.forEach(t=>{t.addEventListener("click",()=>{if(t.classList.contains(a))return!1;t.classList.add(e),t.dataset.value="x",console.log(t),o=!1,u++,i(),v()})})}));